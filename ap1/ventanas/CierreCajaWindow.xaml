<Window x:Class="POS.ventanas.CierreCajaWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Cierre de Caja"
        Height="750"
        Width="520"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="Transparent"
        AllowsTransparency="True"
        WindowStyle="None"
        ShowInTaskbar="False"
        Opacity="0"
        Loaded="Window_Loaded">

    <Border Background="#1a0b2e"
            CornerRadius="16"
            BorderBrush="#8b5cf6"
            BorderThickness="2">
        <Border.Effect>
            <DropShadowEffect Color="#8b5cf6" 
                              Direction="0" 
                              ShadowDepth="0" 
                              BlurRadius="30" 
                              Opacity="0.4"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header con gradiente -->
            <Border Grid.Row="0"
                    Height="110"
                    CornerRadius="16,16,0,0">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#dc2626" Offset="0"/>
                        <GradientStop Color="#ef4444" Offset="0.5"/>
                        <GradientStop Color="#f87171" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>

                <Grid>
                    <Ellipse Width="80" Height="80"
                             Fill="#ffffff"
                             Opacity="0.1"
                             HorizontalAlignment="Left"
                             VerticalAlignment="Top"
                             Margin="-20,-20,0,0"/>

                    <Ellipse Width="60" Height="60"
                             Fill="#ffffff"
                             Opacity="0.1"
                             HorizontalAlignment="Right"
                             VerticalAlignment="Bottom"
                             Margin="0,0,-15,-15"/>

                    <StackPanel VerticalAlignment="Center"
                                HorizontalAlignment="Center">
                        <Border Width="45" Height="45"
                                Background="White"
                                CornerRadius="23"
                                Margin="0,0,0,10">
                            <TextBlock Text="🔒"
                                       FontSize="24"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"/>
                        </Border>

                        <TextBlock Text="Cierre de Caja"
                                   FontSize="19"
                                   FontWeight="Bold"
                                   Foreground="White"
                                   HorizontalAlignment="Center"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Contenido con ScrollViewer -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="40,25,40,25">

                    <!-- Efectivo Esperado -->
                    <Border Background="#0d0520"
                            CornerRadius="10"
                            BorderBrush="#10b981"
                            BorderThickness="1.5"
                            Padding="15"
                            Margin="0,0,0,18">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel>
                                <TextBlock Text="💵 Efectivo Esperado"
                                           FontSize="13"
                                           Foreground="#b8b8b8"
                                           Margin="0,0,0,5"/>
                                <TextBlock Text="Según ventas y movimientos"
                                           FontSize="11"
                                           Foreground="#6b7280"/>
                            </StackPanel>
                            <TextBlock x:Name="txtEfectivoEsperado" 
                                      Text="$0.00" 
                                      Grid.Column="1"
                                      FontWeight="Bold"
                                      FontSize="20"
                                      Foreground="#10b981"
                                      VerticalAlignment="Center"/>
                        </Grid>
                    </Border>

                    <!-- Efectivo Final -->
                    <TextBlock Text="Efectivo Final (Contado)"
                               FontSize="12"
                               Foreground="#8b5cf6"
                               FontWeight="SemiBold"
                               Margin="0,0,0,8"/>

                    <Border Background="#0d0520"
                            CornerRadius="10"
                            BorderBrush="#8b5cf6"
                            BorderThickness="1.5"
                            Margin="0,0,0,18">
                        <Grid>
                            <TextBlock Text="💰"
                                       FontSize="18"
                                       VerticalAlignment="Center"
                                       Margin="15,0,0,0"
                                       Foreground="#8b5cf6"/>

                            <TextBox x:Name="txtEfectivoFinal"
                                     Text="0.00"
                                     FontSize="15"
                                     Padding="45,14,15,14"
                                     Height="50"
                                     BorderThickness="0"
                                     Background="Transparent"
                                     Foreground="White"
                                     CaretBrush="White"
                                     TextChanged="TxtEfectivoFinal_TextChanged">
                                <TextBox.Resources>
                                    <Style TargetType="{x:Type Border}">
                                        <Setter Property="CornerRadius" Value="10"/>
                                    </Style>
                                </TextBox.Resources>
                            </TextBox>
                        </Grid>
                    </Border>

                    <!-- Diferencia -->
                    <Border Background="#0d0520"
                            CornerRadius="10"
                            BorderBrush="#6b7280"
                            BorderThickness="1.5"
                            Padding="15"
                            Margin="0,0,0,18">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel>
                                <TextBlock Text="📊 Diferencia"
                                           FontSize="13"
                                           Foreground="#b8b8b8"
                                           Margin="0,0,0,3"/>
                                <TextBlock Text="Comparado con lo esperado"
                                           FontSize="10"
                                           Foreground="#6b7280"/>
                            </StackPanel>
                            <TextBlock x:Name="txtDiferencia" 
                                      Text="$0.00" 
                                      Grid.Column="1"
                                      FontWeight="Bold"
                                      FontSize="18"
                                      Foreground="#6b7280"
                                      VerticalAlignment="Center"/>
                        </Grid>
                    </Border>

                    <!-- Usuario -->
                    <TextBlock Text="Usuario que Cierra"
                               FontSize="12"
                               Foreground="#8b5cf6"
                               FontWeight="SemiBold"
                               Margin="0,0,0,8"/>

                    <Border Background="#0d0520"
                            CornerRadius="10"
                            BorderBrush="#8b5cf6"
                            BorderThickness="1.5"
                            Margin="0,0,0,18">
                        <Grid>
                            <TextBlock Text="👤"
                                       FontSize="18"
                                       VerticalAlignment="Center"
                                       Margin="15,0,0,0"
                                       Foreground="#8b5cf6"/>

                            <TextBox x:Name="txtUsuario"
                                     FontSize="15"
                                     Padding="45,14,15,14"
                                     Height="50"
                                     BorderThickness="0"
                                     Background="Transparent"
                                     Foreground="White"
                                     CaretBrush="White">
                                <TextBox.Resources>
                                    <Style TargetType="{x:Type Border}">
                                        <Setter Property="CornerRadius" Value="10"/>
                                    </Style>
                                </TextBox.Resources>
                            </TextBox>
                        </Grid>
                    </Border>

                    <!-- Observaciones -->
                    <TextBlock Text="Observaciones"
                               FontSize="12"
                               Foreground="#8b5cf6"
                               FontWeight="SemiBold"
                               Margin="0,0,0,8"/>

                    <Border Background="#0d0520"
                            CornerRadius="10"
                            BorderBrush="#8b5cf6"
                            BorderThickness="1.5"
                            Margin="0,0,0,25"
                            Height="80">
                        <TextBox x:Name="txtObservaciones"
                                 FontSize="14"
                                 Padding="15,12"
                                 BorderThickness="0"
                                 Background="Transparent"
                                 Foreground="White"
                                 CaretBrush="White"
                                 TextWrapping="Wrap"
                                 AcceptsReturn="True"
                                 VerticalScrollBarVisibility="Auto">
                            <TextBox.Resources>
                                <Style TargetType="{x:Type Border}">
                                    <Setter Property="CornerRadius" Value="10"/>
                                </Style>
                            </TextBox.Resources>
                        </TextBox>
                    </Border>

                    <!-- Botones -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="15"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Botón Cancelar -->
                        <Button Grid.Column="0"
                                Content="Cancelar"
                                Height="48"
                                FontSize="14"
                                FontWeight="Medium"
                                Foreground="#e0e0e0"
                                BorderThickness="1.5"
                                BorderBrush="#4c2f7a"
                                Cursor="Hand"
                                Click="BtnCancelar_Click"
                                IsCancel="True">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border x:Name="border"
                                                        Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                        CornerRadius="10">
                                                    <ContentPresenter HorizontalAlignment="Center"
                                                                      VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="border" Property="Background" Value="#0d0520"/>
                                                        <Setter TargetName="border" Property="BorderBrush" Value="#8b5cf6"/>
                                                    </Trigger>
                                                    <Trigger Property="IsPressed" Value="True">
                                                        <Setter TargetName="border" Property="Background" Value="#1a0b2e"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>

                        <!-- Botón Cerrar Caja -->
                        <Button Grid.Column="2"
                                Content="Cerrar Caja"
                                Height="48"
                                FontSize="14"
                                FontWeight="SemiBold"
                                Foreground="White"
                                BorderThickness="0"
                                Cursor="Hand"
                                Click="BtnAceptar_Click"
                                IsDefault="True">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Background">
                                        <Setter.Value>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                <GradientStop Color="#dc2626" Offset="0"/>
                                                <GradientStop Color="#ef4444" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Setter.Value>
                                    </Setter>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border x:Name="border"
                                                        Background="{TemplateBinding Background}"
                                                        CornerRadius="10">
                                                    <Border.Effect>
                                                        <DropShadowEffect Color="#ef4444" 
                                                                          Direction="270" 
                                                                          ShadowDepth="2" 
                                                                          BlurRadius="10" 
                                                                          Opacity="0.5"/>
                                                    </Border.Effect>
                                                    <ContentPresenter HorizontalAlignment="Center"
                                                                      VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="border" Property="Background">
                                                            <Setter.Value>
                                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                                    <GradientStop Color="#b91c1c" Offset="0"/>
                                                                    <GradientStop Color="#dc2626" Offset="1"/>
                                                                </LinearGradientBrush>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Trigger>
                                                    <Trigger Property="IsPressed" Value="True">
                                                        <Setter TargetName="border" Property="Background">
                                                            <Setter.Value>
                                                                <SolidColorBrush Color="#991b1b"/>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>
                    </Grid>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Border>
</Window>
